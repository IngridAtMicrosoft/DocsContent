# Azure Monitor Documentation Generation Project

## Project Statement

This project aims to build an automated (headless) system that generates comprehensive Azure Monitor reference documentation by discovering and processing Azure services, their associated logs, metrics, and Log Analytics tables. The system will produce a complete documentation structure that matches the examples provided, including structured markdown files, table of contents, and reusable include files.

The examples folder contains the markdown that has been generated by a previous system which is fragile. They are there to measure the success of the application and to assist with modeling the output of the replacement application we are build. They are not to be scraped or used as a data source.

## Copilot sessions
As models tend to thrash and destroy previously working code, every effort is being made to be explicit and to avoid this unfortunate result of working with an LLM to write applications, also known as "vibe coding".

The project will be completed over multiple sessions over multiple days. For continuity, a project_status.md file is availble to keep track of what was done. It has its own directives.

There is a new_session_directives.md file for the model to read and stay loyal to, so that we don't have to keep reminding it and so that it doesn't drift.

## Authentication
All local development will happen with the Azure CLI. Creating service principals is not allowed so secrets will also not be used. The tenant and subscription to be used has access to all Azure resources in the westus region. We will always use this region if it become necessary to create actual resources. Assume that the developer working with the LLM has already logged in and is using the correct subscription.

## Datasources
As no data will be scraped from official documentation, the project uses only the Azure APIs, and Kusto queries. Since some data isn't available until a resource is actually running and producing data, a bicep file is being used to spin up those resources. Those resources must be automatically deleted when they are no longer needed. This may mean that they get deleted when the necessary information has been obtained from them.

## Major phases
There are four major phases of the project:
1. Analysis: analyzing the example files as the ulitmate success criteria for the entire project. 
2. Data Collection: making certain that the data needed to populate the documents is available and ready to be processed.
3. Data Processing: mapping data so that it is ready to be used in the documentation.
4. Document Creation: templates for document creation established.

## Success criteria for the project
All of the documentation can be reproduced using this application. The generated documentation must match the examples exactly.

## Phase 1: Analysis: Completed

The outcome of this step is a markdown table that uses the following template:

|Type of page | Data in page | Source of data | API or other technology used |
| ----------- | ------------ | -------------- | ---------------------------- |

See analysis.md.

## Phase 2: Data Collection INCOMPLETE
**Success criteria for this phase**:

1. Ensure that all of the data required for producing markdown that exactly matches what is in the examples folder and child folders. This includes knowing where the data comes from especially if the data can only come from a running Azure resource. 
2. A table of Azure resources in a markdown file that shows the kinds of data the resource produces.
3. Determine if the following data source listing is true or false: 
    1. **Azure Resource Graph**: For discovering all resource providers, resource types, and service categorization
    2. **Azure Monitor Metrics Definitions API**: For platform metrics metadata
    3. **Azure Monitor Diagnostic Settings Categories API**: For supported log categories
    4. **Azure Monitor Logs Schema API**: For Log Analytics table schemas and field definitions
    5. **Kusto Queries**: For table schema discovery and validation
    6. **Sample Queries Repository**: For curated KQL query examples

See project_status.md

## Phase 3: Data Processing
TBD

## Phase 4: Document Creation
TBD
